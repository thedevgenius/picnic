{% extends 'base.html' %}
{% load static %}
{% block title %}Picnic Payment{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white rounded-2xl shadow-sm p-6">

    
    <h2 class="text-xl font-extrabold text-center mb-2">Picnic Contribution</h2>

    <p class="text-sm text-slate-500 text-center mb-5">â‚¹300 per person</p>

    <form method="post" id="payForm" class="space-y-4">
        {% csrf_token %}

        <!-- Name -->
        <div>
            <label class="block text-sm font-bold text-slate-600 mb-1">
                Your Name
            </label>
            <input type="text"
                   name="name"
                   required
                   placeholder="Enter your name"
                   {% if user.first_name %}value="{{ user.first_name }}"{% endif %}
                   class="w-full border rounded-xl px-4 py-3 outline-none focus:ring-1 focus:ring-teal-500">
        </div>

        <!-- Participants -->
        <div>
            <label class="block text-sm font-bold text-slate-600 mb-1">
                Number of Participants
            </label>
            <select name="candidate"
                    id="participants"
                    required
                    class="w-full border rounded-xl px-4 py-3 bg-white focus:ring-1 focus:ring-teal-500">
                <option value="1">1 Person</option>
                <option value="2" {% if candidate == 2 %}selected{% endif %}>2 Persons</option>
                <option value="3" {% if candidate == 3 %}selected{% endif %}>3 Persons</option>
                <option value="4" {% if candidate == 4 %}selected{% endif %}>4 Persons</option>
                <option value="5" {% if candidate == 5 %}selected{% endif %}>5 Persons</option>
            </select>
        </div>

        <!-- Amount (Display Only) -->
        <div class="bg-slate-100 rounded-xl p-4 text-center">
            <p class="text-sm text-slate-600">Total Amount</p>
            <p class="text-3xl font-extrabold text-teal-600">
                â‚¹ <span id="amount">{{ amount }}</span>
            </p>
        </div>

        <!-- Submit -->
        <button type="submit" class="w-full bg-teal-600 text-white rounded-xl py-3 font-bold active:scale-95 transition">
            ðŸš€ Proceed to Pay
        </button>

    </form>
        
    
</div>

<!-- JS (ONLY FOR AMOUNT CALCULATION) -->
    
<script>
    const PRICE_PER_PERSON = 300;
    const MIN_PARTICIPANTS = 1;

    const participantSelect = document.getElementById('participants');
    const amountText = document.getElementById('amount');

    participantSelect.addEventListener('change', function () {
        const count = parseInt(this.value || 0);

        if (count < MIN_PARTICIPANTS) {
            amountText.textContent = PRICE_PER_PERSON;
            return;
        }

        amountText.textContent = count * PRICE_PER_PERSON;
    });
</script>
{% endblock %}
